# 確認メールリンク認証

確認メール内のリンクをクリックするとこのエンドポイントが呼び出され、本人確認が完了してメールアドレスが認証済みになります。

---

**URL** : `/api/email/verify/{id}/{hash}`

**メソッド** : `GET`

**認証** : 必須（`auth:sanctum`）

**権限** : 不要

**データ制約** : なし

**ヘッダー制約** : `Authorization: Bearer {token}`  

---

## 成功レスポンス

### メールアドレス認証成功

**条件** : ログイン済みのユーザーが未確認状態であり、確認メールが送信された。

**コード** : `200 OK`

**戻り値の例** :

```json
{
    "message": "メールアドレスを確認しました",
    "token": "xxxxxxxxxxxxxxxxxxxx",
    "user": {
        "id": 1,
        "name": "テストユーザー",
        "email": "test@example.com",
        "email_verified_at": "2025-05-23T00:00:00.000000Z",
        ...
    }
}
```

### すでに確認済み

**条件** : メールアドレスがすでに確認済みである。

**コード** : `200 OK`

**戻り値の例** :

```json
{
    "message": "既に確認済みです。"
}
```

## エラーレスポンス

### 未認証（トークン不備）

**条件** : トークンが無効、またはログインしていない。

**コード** : `401 Unauthorized`

**戻り値の例** :

```json
{
    "error": {
        "message": "Unauthenticated",
        "code": "UNAUTHENTICATED",
        "status": 401
    }
}
```
